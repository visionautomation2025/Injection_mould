<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polywin Industries - Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .loading-bg {
            background-color: #fef3c7 !important;
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #fbbf24 100%) !important;
        }
        .loading-spinner {
            background-color: #d97706 !important;
            box-shadow: 0 0 20px rgba(217, 119, 6, 0.5) !important;
        }
        .loading-progress {
            background-color: #b45309 !important;
        }
        .loading-text {
            color: #92400e !important;
        }
        .loading-subtext {
            color: #78350f !important;
        }
        .loading-container {
            background: rgba(254, 243, 199, 0.95) !important;
            backdrop-filter: blur(10px) !important;
            border: 2px solid #fbbf24 !important;
            border-radius: 20px !important;
            padding: 40px !important;
            box-shadow: 0 20px 40px rgba(251, 191, 36, 0.3) !important;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex items-center justify-center p-4">
    
    <!-- Login Container -->
    <div class="w-full max-w-4xl bg-white rounded-2xl shadow-2xl overflow-hidden">
        <div class="flex flex-col lg:flex-row">
            
                         <!-- Left Side - Company Info -->
             <div class="lg:w-1/2 p-8 lg:p-12 flex flex-col justify-center" style="background-color: #E7DEBE;">
                                 <div class="text-black">
                    <h1 class="text-2xl lg:text-3xl font-bold mb-4">POLYWIN INDUSTRIES</h1>
                                         <div class="h-0.5 w-24 bg-black rounded-full opacity-60 mb-6"></div>
                    
                    <p class="text-lg mb-6">
                        Polywin Industries is a company based in Bengaluru, India, that manufactures and supplies plastic injection molding machines and related components.
                    </p>
                    
                    <div class="space-y-3">
                                                 <div class="flex items-center space-x-3">
                             <div class="w-2 h-2 bg-black rounded-full"></div>
                             <span>Manufactures plastic injection molding machines</span>
                         </div>
                         <div class="flex items-center space-x-3">
                             <div class="w-2 h-2 bg-black rounded-full"></div>
                             <span>Supplies related components and parts</span>
                         </div>
                         <div class="flex items-center space-x-3">
                             <div class="w-2 h-2 bg-black rounded-full"></div>
                             <span>Based in Bengaluru, India</span>
                         </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Side - Login Form -->
            <div class="lg:w-1/2 p-8 lg:p-12 flex flex-col justify-center">
                <div class="max-w-md mx-auto w-full">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-gray-800 mb-2">System Access</h2>
                        <p class="text-gray-600">Authenticate to access industrial automation controls</p>
                    </div>
                    
                    <form id="loginForm" class="space-y-6">
                        <div>
                            <input type="email" id="email" placeholder="Email Address" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <div>
                            <input type="password" id="password" placeholder="Password" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <button type="submit" id="loginBtn" 
                                class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                            Access System
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            console.log('Login form submitted!');
            
            // Auto-fill credentials
            document.getElementById('email').value = 'admin@polywin.com';
            document.getElementById('password').value = 'secure_access_2024';
            
            // Show loading state
            const button = document.getElementById('loginBtn');
            button.textContent = 'Authenticating...';
            button.disabled = true;
            
            // Go directly to success screen
            setTimeout(() => {
                showSuccessScreen();
            }, 1000);
        });
        

        
        function showSuccessScreen() {
            const successOverlay = document.createElement('div');
            successOverlay.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            successOverlay.innerHTML = `
                <div class="bg-white rounded-3xl p-8 shadow-2xl text-center max-w-md">
                    <div class="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce">
                        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                        </svg>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Login Successful!</h2>
                    <p class="text-gray-600 mb-6">Welcome to Polywin Industries Control System</p>
                </div>
            `;
            document.body.appendChild(successOverlay);
            
            // Show dashboard after 2 seconds
            setTimeout(() => {
                successOverlay.remove();
                showDashboard();
            }, 2000);
        }
        
                 function showDashboard() {
             document.body.innerHTML = `
                 <div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8">
                     <div class="max-w-6xl mx-auto">
                         <div class="text-center mb-12">
                             <h1 class="text-4xl font-bold text-gray-800 mb-4">Welcome to Polywin Industries</h1>
                             <p class="text-xl text-gray-600">Industrial Automation Control System</p>
                             <div class="mt-4 p-4 bg-green-100 border border-green-300 rounded-lg">
                                 <p class="text-green-800 font-semibold">‚úÖ Login Successful!</p>
                             </div>
                         </div>
                         
                         <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                                                           <div onclick="showTeachingMode()" class="bg-blue-500 text-white p-8 rounded-2xl text-center hover:bg-blue-600 transition-colors cursor-pointer">
                                  <h3 class="text-2xl font-bold mb-2">Teaching Mode</h3>
                                  <p>Train and configure system parameters</p>
                              </div>
                              <div onclick="showInspectionMode()" class="bg-green-500 text-white p-8 rounded-2xl text-center hover:bg-green-600 transition-colors cursor-pointer">
                                  <h3 class="text-2xl font-bold mb-2">Inspection Mode</h3>
                                  <p>Quality control and inspection tools</p>
                              </div>
                                                           <div onclick="showReportMode()" class="bg-purple-500 text-white p-8 rounded-2xl text-center hover:bg-purple-600 transition-colors cursor-pointer">
                                  <h3 class="text-2xl font-bold mb-2">Report</h3>
                                  <p>Generate and view reports</p>
                              </div>
                         </div>
                         
                         <div class="text-center mt-12">
                             <button onclick="location.reload()" class="bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors">
                                 üö™ Logout
                             </button>
                         </div>
                     </div>
                 </div>
             `;
         }
         
         // Teaching Mode Variables
         let currentDefectIndex = 0;
         let currentStep = 0;
                   const defects = [
              { name: 'Short Fill', type: 'short-fill' },
              { name: 'Sliver Streak', type: 'sliver-streak' },
              { name: 'Flow Mark', type: 'flow-mark' },
              { name: 'Flash', type: 'flash' }
          ];
         
                                       function showTeachingMode() {
               document.body.innerHTML = `
                   <div class="h-screen bg-gray-900 text-white flex flex-col">
                       <!-- Header -->
                       <div class="bg-gray-800 p-4 border-b border-gray-700 flex-shrink-0">
                           <div class="flex justify-between items-center">
                               <h1 class="text-2xl font-bold">Teaching Mode - Defect Training</h1>
                               <button onclick="showDashboard()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                                   ‚Üê Back to Dashboard
                               </button>
                           </div>
                       </div>
                       
                       <!-- Main Content -->
                       <div class="flex flex-1 overflow-hidden">
                           <!-- Live Camera Feed (2/3 width) -->
                           <div class="w-2/3 bg-black relative">
                               <div class="absolute inset-0 flex items-center justify-center">
                                   <div class="text-center">
                                       <div class="w-full max-w-4xl h-96 bg-gray-800 rounded-lg border-2 border-gray-600 flex items-center justify-center">
                                           <div class="text-gray-400">
                                               <svg class="w-20 h-20 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                   <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                               </svg>
                                               <p class="text-lg">Live Camera Feed</p>
                                           </div>
                                       </div>
                                   </div>
                               </div>
                               
                               <!-- Animation Overlays -->
                               <div id="animationOverlay" class="absolute inset-0 pointer-events-none"></div>
                           </div>
                           
                           <!-- Teaching Progress (1/3 width) -->
                           <div class="w-1/3 bg-gray-800 p-6 flex flex-col">
                               <div class="space-y-6 flex-1">
                                   <!-- Current Defect Info -->
                                   <div class="bg-gray-700 rounded-lg p-6">
                                       <h3 class="text-xl font-semibold mb-3">Current Defect: <span id="currentDefectName">Short Fill</span></h3>
                                       <p class="text-gray-300 text-base" id="currentInstructions">Position a good part under the camera</p>
                                   </div>
                                   
                                   <!-- Overall Progress -->
                                   <div class="bg-gray-700 rounded-lg p-6">
                                       <h4 class="font-semibold mb-3 text-lg">Overall Progress</h4>
                                       <div class="w-full bg-gray-600 rounded-full h-3 mb-3">
                                           <div id="overallProgress" class="bg-blue-500 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                                       </div>
                                       <p class="text-base text-gray-300"><span id="progressText">0</span> of 4 defects completed</p>
                                   </div>
                                   
                                   <!-- Defect Status -->
                                   <div class="bg-gray-700 rounded-lg p-6 flex-1">
                                       <h4 class="font-semibold mb-4 text-lg">Defect Status</h4>
                                       <div class="grid grid-cols-2 gap-4 h-full" id="defectStatus">
                                           <div class="bg-gray-600 rounded-lg p-4 text-center flex flex-col justify-center">
                                               <div class="text-base font-medium mb-3">Short Fill</div>
                                               <div class="w-8 h-8 bg-gray-500 rounded-full mx-auto" id="status-short-fill"></div>
                                           </div>
                                           <div class="bg-gray-600 rounded-lg p-4 text-center flex flex-col justify-center">
                                               <div class="text-base font-medium mb-3">Sliver Streak</div>
                                               <div class="w-8 h-8 bg-gray-500 rounded-full mx-auto" id="status-sliver-streak"></div>
                                           </div>
                                           <div class="bg-gray-600 rounded-lg p-4 text-center flex flex-col justify-center">
                                               <div class="text-base font-medium mb-3">Flow Mark</div>
                                               <div class="w-8 h-8 bg-gray-500 rounded-full mx-auto" id="status-flow-mark"></div>
                                           </div>
                                           <div class="bg-gray-600 rounded-lg p-4 text-center flex flex-col justify-center">
                                               <div class="text-base font-medium mb-3">Flash</div>
                                               <div class="w-8 h-8 bg-gray-500 rounded-full mx-auto" id="status-flash"></div>
                                           </div>
                                       </div>
                                   </div>
                               </div>
                           </div>
                       </div>
                   </div>
               `;
             
             // Start the teaching sequence
             startTeachingSequence();
         }
         
         function startTeachingSequence() {
             currentDefectIndex = 0;
             currentStep = 0;
             updateProgress();
             startDefectTeaching();
         }
         
         function startDefectTeaching() {
             if (currentDefectIndex >= defects.length) {
                 showTeachingComplete();
                 return;
             }
             
             const defect = defects[currentDefectIndex];
             document.getElementById('currentDefectName').textContent = defect.name;
             
                           switch (defect.type) {
                  case 'short-fill':
                      startShortFillTeaching();
                      break;
                  case 'sliver-streak':
                      startSliverStreakTeaching();
                      break;
                  case 'flow-mark':
                      startFlowMarkTeaching();
                      break;
                  case 'flash':
                      startFlashTeaching();
                      break;
              }
         }
         
                   function startShortFillTeaching() {
              const steps = [
                  { message: "System is learning the complete shape of a good part.", duration: 2000 },
                  { message: "Now, present a part with a SHORT FILL.", duration: 2000 },
                  { message: "Analyzing defect pattern...", duration: 2000 },
                  { message: "Short Fill teaching completed!", duration: 1500 }
              ];
              
              executeTeachingSteps(steps, 'short-fill');
          }
         
         function startSliverStreakTeaching() {
             const steps = [
                 { message: "Let's teach Surface Defects. First, position a GOOD part under the camera.", duration: 2000 },
                 { message: "Learning normal surface texture in this region.", duration: 2000 },
                 { message: "Now, present a part with a SLIVER STREAK.", duration: 2000 },
                 { message: "Align the streak within the blue highlighted area.", duration: 2000 },
                 { message: "Defect captured. This abnormal texture will be flagged in the future.", duration: 2000 },
                 { message: "Sliver Streak teaching completed!", duration: 1500 }
             ];
             
             executeTeachingSteps(steps, 'sliver-streak');
         }
         
         function startFlowMarkTeaching() {
             const steps = [
                 { message: "Let's teach Flow Marks. First, position a GOOD part under the camera.", duration: 2000 },
                 { message: "Now, present a part with a FLOW MARK.", duration: 2000 },
                 { message: "Slowly rotate the part under the light. The lines will become visible at certain angles.", duration: 2500 },
                 { message: "Please manually trace the main flow line you see.", duration: 2000 },
                 { message: "Pattern learned. The system will now inspect this area for similar surface deviations.", duration: 2000 },
                 { message: "Flow Mark teaching completed!", duration: 1500 }
             ];
             
             executeTeachingSteps(steps, 'flow-mark');
         }
         
         function startFlashTeaching() {
             const steps = [
                 { message: "Let's teach Flash. Present a part with FLASH on its edge.", duration: 2000 },
                 { message: "The red line shows the perfect edge. Look for material outside this line.", duration: 2000 },
                 { message: "Zoom in on the area with flash.", duration: 2000 },
                 { message: "Position the flashing within the center of the view.", duration: 2000 },
                 { message: "Flash identified. Tolerance threshold set.", duration: 2000 },
                 { message: "Flash teaching completed!", duration: 1500 }
             ];
             
             executeTeachingSteps(steps, 'flash');
         }
         
         function executeTeachingSteps(steps, defectType) {
             let stepIndex = 0;
             
             function executeStep() {
                 if (stepIndex >= steps.length) {
                     completeDefectTeaching(defectType);
                     return;
                 }
                 
                 const step = steps[stepIndex];
                 document.getElementById('currentInstructions').textContent = step.message;
                 
                 // Add visual effects based on step
                 addVisualEffects(defectType, stepIndex);
                 
                 stepIndex++;
                 
                 setTimeout(executeStep, step.duration);
             }
             
             executeStep();
         }
         
         function addVisualEffects(defectType, stepIndex) {
             const overlay = document.getElementById('animationOverlay');
             overlay.innerHTML = '';
             
                           switch (defectType) {
                  case 'short-fill':
                      if (stepIndex === 0) {
                          // Green outline animation
                          overlay.innerHTML = '<div class="absolute inset-0 border-4 border-green-500 rounded-lg animate-pulse" style="margin: 20px;"></div>';
                      } else if (stepIndex === 1) {
                          // Arrow pointing to nest
                          overlay.innerHTML = '<div class="absolute top-4 right-4 text-red-500 text-6xl animate-bounce">‚Üí</div>';
                      }
                      break;
                     
                 case 'sliver-streak':
                     if (stepIndex === 1) {
                         // Blue ROI rectangle
                         overlay.innerHTML = '<div class="absolute top-1/4 left-1/4 w-1/2 h-1/2 border-4 border-blue-500 rounded-lg animate-pulse"></div>';
                     } else if (stepIndex === 3) {
                         // Magnifying glass effect
                         overlay.innerHTML = '<div class="absolute top-1/4 left-1/4 w-1/2 h-1/2 border-4 border-blue-500 rounded-full animate-ping"></div>';
                     } else if (stepIndex === 4) {
                         // Red circle around defect
                         overlay.innerHTML = '<div class="absolute top-1/3 left-1/3 w-1/3 h-1/3 border-4 border-red-500 rounded-full animate-pulse"></div>';
                     }
                     break;
                     
                 case 'flow-mark':
                     if (stepIndex === 2) {
                         // Wavy line animation
                         overlay.innerHTML = '<div class="absolute inset-0 flex items-center justify-center text-yellow-400 text-6xl animate-pulse">~ ~ ~</div>';
                     } else if (stepIndex === 3) {
                         // Yellow drawing line
                         overlay.innerHTML = '<div class="absolute top-1/3 left-1/4 w-1/2 h-1 border-2 border-yellow-400 rounded-full"></div>';
                     }
                     break;
                     
                 case 'flash':
                     if (stepIndex === 1) {
                         // Red outline of perfect edge
                         overlay.innerHTML = '<div class="absolute inset-0 border-4 border-red-500 rounded-lg" style="margin: 10px;"></div>';
                     } else if (stepIndex === 2) {
                         // Zoom buttons
                         overlay.innerHTML = '<div class="absolute top-4 right-4 space-y-2"><button class="bg-blue-500 text-white w-8 h-8 rounded">+</button><button class="bg-blue-500 text-white w-8 h-8 rounded">-</button></div>';
                     } else if (stepIndex === 4) {
                         // Yellow arrow and red hatch
                         overlay.innerHTML = '<div class="absolute top-1/2 left-1/2 text-yellow-400 text-4xl animate-bounce">‚Üí</div><div class="absolute top-1/4 left-1/4 w-1/2 h-1/2 bg-red-500 bg-opacity-30"></div>';
                     }
                     break;
             }
         }
         
                   function completeDefectTeaching(defectType) {
              // Mark defect as complete
              document.getElementById(`status-${defectType}`).className = 'w-8 h-8 bg-green-500 rounded-full mx-auto animate-pulse';
              
              // Clear overlay
              document.getElementById('animationOverlay').innerHTML = '';
              
              // Move to next defect
              currentDefectIndex++;
              updateProgress();
              
              // Wait 1 second before starting next defect
              setTimeout(() => {
                  startDefectTeaching();
              }, 1000);
          }
         
         function updateProgress() {
             const progress = (currentDefectIndex / defects.length) * 100;
             document.getElementById('overallProgress').style.width = progress + '%';
             document.getElementById('progressText').textContent = currentDefectIndex;
         }
         
                   function showTeachingComplete() {
              document.body.innerHTML = `
                  <div class="min-h-screen bg-gradient-to-br from-green-50 to-green-100 flex items-center justify-center p-4">
                      <div class="bg-white rounded-3xl p-12 shadow-2xl text-center max-w-2xl">
                          <div class="w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-8 animate-bounce">
                              <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                              </svg>
                          </div>
                          <h1 class="text-4xl font-bold text-gray-800 mb-4">Teaching Complete!</h1>
                          <p class="text-xl text-gray-600 mb-8">All 4 defects have been successfully taught to the system.</p>
                          <div class="space-y-4">
                              <button onclick="showTeachingMode()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 px-8 rounded-xl font-semibold text-lg transition-colors">
                                  üîÑ Start Again
                              </button>
                              <button onclick="showDashboard()" class="w-full bg-gray-600 hover:bg-gray-700 text-white py-4 px-8 rounded-xl font-semibold text-lg transition-colors">
                                  üè† Exit Teaching Mode
                              </button>
                          </div>
                      </div>
                  `;
          }
          
          // Inspection Mode Variables
          let inspectionStats = {
              partsInspected: 0,
              defectsFound: 0,
              passRate: 100
          };
          
          let inspectionInterval;
          let isInspecting = false;
          
                                                                                       function showInspectionMode() {
                 document.body.innerHTML = `
                     <div class="h-screen bg-gray-900 text-white flex flex-col">
                         <!-- Header -->
                         <div class="bg-gray-800 p-4 border-b border-gray-700 flex-shrink-0">
                             <div class="flex justify-between items-center">
                                 <h1 class="text-2xl font-bold">Inspection Mode - Quality Control</h1>
                                 <button onclick="showDashboard()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                                     ‚Üê Back to Dashboard
                                 </button>
                             </div>
                         </div>
                         
                         <!-- Main Content -->
                         <div class="flex-1 flex">
                             <!-- Left Panel - Camera Feed -->
                             <div class="flex-1 bg-black relative">
                                 <div class="absolute inset-0 flex items-center justify-center">
                                     <div class="text-center w-full max-w-4xl">
                                         <!-- Camera Feed Container -->
                                         <div class="w-full h-[500px] bg-gray-800 rounded-lg border-2 border-gray-600 relative overflow-hidden">
                                             <!-- Camera Lens Simulation -->
                                             <div class="absolute inset-4 bg-gray-900 rounded-full flex items-center justify-center">
                                                 <div class="w-32 h-32 bg-gray-800 rounded-full flex items-center justify-center relative">
                                                     <!-- Camera Lens -->
                                                     <div class="w-24 h-24 bg-gray-700 rounded-full flex items-center justify-center">
                                                         <div class="w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center">
                                                             <div class="w-8 h-8 bg-gray-500 rounded-full"></div>
                                                         </div>
                                                     </div>
                                                     <!-- Camera Status Light -->
                                                     <div id="cameraStatusLight" class="absolute top-2 right-2 w-4 h-4 bg-red-500 rounded-full"></div>
                                                 </div>
                                             </div>
                                             
                                             <!-- Scanning Grid -->
                                             <div id="scanningGrid" class="absolute inset-0 pointer-events-none opacity-0 transition-opacity duration-1000">
                                                 <div class="grid grid-cols-3 grid-rows-3 h-full">
                                                     <div class="border border-green-400 opacity-30"></div>
                                                     <div class="border border-green-400 opacity-30"></div>
                                                     <div class="border border-green-400 opacity-30"></div>
                                                     <div class="border border-green-400 opacity-30"></div>
                                                     <div class="border border-green-400 opacity-30"></div>
                                                     <div class="border border-green-400 opacity-30"></div>
                                                     <div class="border border-green-400 opacity-30"></div>
                                                     <div class="border border-green-400 opacity-30"></div>
                                                     <div class="border border-green-400 opacity-30"></div>
                                                 </div>
                                             </div>
                                             
                                             <!-- Scanning Line -->
                                             <div id="scanningLine" class="absolute left-0 right-0 h-1 bg-green-400 opacity-0 transition-all duration-1000"></div>
                                             
                                             <!-- Part Simulation -->
                                             <div id="partSimulation" class="absolute inset-0 flex items-center justify-center opacity-0 transition-opacity duration-1000">
                                                 <div class="w-24 h-20 bg-gray-600 rounded-lg relative transform rotate-45">
                                                     <!-- Base of L-shape -->
                                                     <div class="absolute bottom-0 left-0 w-20 h-4 bg-gray-500 rounded-l-lg"></div>
                                                     <!-- Vertical part of L-shape -->
                                                     <div class="absolute top-0 right-0 w-4 h-16 bg-gray-500 rounded-r-lg"></div>
                                                     <!-- Circular hole -->
                                                     <div class="absolute top-1 right-1 w-3 h-3 bg-gray-400 rounded-full"></div>
                                                 </div>
                                             </div>
                                             
                                             <!-- Status Text -->
                                             <div class="absolute top-4 left-4 text-white font-semibold">
                                                 <span id="cameraStatusText">Camera Ready</span>
                                             </div>
                                         </div>
                                         
                                         <!-- Control Buttons -->
                                         <div class="mt-4 flex justify-center space-x-4">
                                             <button id="startBtn" onclick="startInspection()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                                                 ‚ñ∂ Start Inspection
                                             </button>
                                             <button id="stopBtn" onclick="stopInspection()" disabled class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                                                 ‚èπ Stop Inspection
                                             </button>
                                             <button id="pauseBtn" onclick="pauseInspection()" disabled class="bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                                                 ‚è∏ Pause
                                             </button>
                                         </div>
                                     </div>
                                 </div>
                                 
                                 <!-- Inspection Overlays -->
                                 <div id="inspectionOverlay" class="absolute inset-0 pointer-events-none"></div>
                             </div>
                             
                             <!-- Right Panel - Status & Controls -->
                             <div class="w-80 bg-gray-800 border-l border-gray-700 p-4">
                                 <h2 class="text-xl font-semibold mb-4">Inspection Status</h2>
                                 
                                 <!-- Status Display -->
                                 <div class="bg-gray-700 rounded-lg p-4 mb-4">
                                     <p class="text-sm text-gray-300 mb-2">Status:</p>
                                     <p id="inspectionStatus" class="text-lg font-semibold text-green-400">Ready</p>
                                 </div>
                                 
                                 <!-- Statistics -->
                                 <div class="bg-gray-700 rounded-lg p-4 mb-4">
                                     <h3 class="text-lg font-semibold mb-3">Statistics</h3>
                                     <div class="space-y-2">
                                         <div class="flex justify-between">
                                             <span>Parts Inspected:</span>
                                             <span id="partsInspected" class="font-semibold">0</span>
                                         </div>
                                         <div class="flex justify-between">
                                             <span>Defects Found:</span>
                                             <span id="defectsFound" class="font-semibold">0</span>
                                         </div>
                                         <div class="flex justify-between">
                                             <span>Pass Rate:</span>
                                             <span id="passRate" class="font-semibold">100%</span>
                                         </div>
                                     </div>
                                 </div>
                                 
                                 <!-- Defect Types Status -->
                                 <div class="bg-gray-700 rounded-lg p-4 mb-4">
                                     <h3 class="text-lg font-semibold mb-3">Defect Detection</h3>
                                     <div class="space-y-2">
                                         <div class="flex items-center space-x-2">
                                             <div id="shortFillStatus" class="w-3 h-3 bg-gray-500 rounded-full"></div>
                                             <span>Short Fill</span>
                                         </div>
                                         <div class="flex items-center space-x-2">
                                             <div id="silverStreakStatus" class="w-3 h-3 bg-gray-500 rounded-full"></div>
                                             <span>Silver Streak</span>
                                         </div>
                                         <div class="flex items-center space-x-2">
                                             <div id="flowMarkStatus" class="w-3 h-3 bg-gray-500 rounded-full"></div>
                                             <span>Flow Mark</span>
                                         </div>
                                         <div class="flex items-center space-x-2">
                                             <div id="flashStatus" class="w-3 h-3 bg-gray-500 rounded-full"></div>
                                             <span>Flash</span>
                                         </div>
                                     </div>
                                 </div>
                                 
                                 <!-- Detection Log -->
                                 <div class="bg-gray-700 rounded-lg p-4 mb-4">
                                     <h3 class="text-lg font-semibold mb-3">Recent Detections</h3>
                                     <div id="detectionLog" class="text-sm space-y-1 max-h-32 overflow-y-auto">
                                         <p class="text-gray-400">No defects detected yet</p>
                                     </div>
                                 </div>
                                 
                                 <!-- Reset Button -->
                                 <button onclick="resetStats()" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors">
                                     üîÑ Reset Statistics
                                 </button>
                             </div>
                         </div>
                     </div>
                 `;
          }
          
          function startInspection() {
              isInspecting = true;
              document.getElementById('startBtn').disabled = true;
              document.getElementById('stopBtn').disabled = false;
              document.getElementById('pauseBtn').disabled = false;
              document.getElementById('inspectionStatus').textContent = 'Starting inspection...';
              
              // Start inspection sequence
              startInspectionSequence();
          }
          
          function stopInspection() {
              isInspecting = false;
              clearInterval(inspectionInterval);
              document.getElementById('startBtn').disabled = false;
              document.getElementById('stopBtn').disabled = true;
              document.getElementById('pauseBtn').disabled = true;
              document.getElementById('inspectionStatus').textContent = 'Inspection stopped';
              document.getElementById('inspectionOverlay').innerHTML = '';
          }
          
          function pauseInspection() {
              if (isInspecting) {
                  isInspecting = false;
                  clearInterval(inspectionInterval);
                  document.getElementById('inspectionStatus').textContent = 'Inspection paused';
              } else {
                  isInspecting = true;
                  inspectionInterval = setInterval(() => {
                      simulateInspection();
                  }, 3000);
                  document.getElementById('inspectionStatus').textContent = 'Inspecting parts...';
              }
          }
          
          function resetStats() {
              inspectionStats = {
                  partsInspected: 0,
                  defectsFound: 0,
                  passRate: 100
              };
              updateInspectionStats();
              document.getElementById('detectionLog').innerHTML = '<p>No defects detected yet</p>';
          }
          
          function startInspectionSequence() {
              // Step 1: Camera activation
              document.getElementById('cameraStatusLight').className = 'absolute top-2 right-2 w-4 h-4 bg-green-500 rounded-full animate-pulse';
              document.getElementById('cameraStatusText').textContent = 'Camera Active';
              document.getElementById('inspectionStatus').textContent = 'Camera Active';
              
              setTimeout(() => {
                  // Step 2: Show scanning grid
                  document.getElementById('scanningGrid').style.opacity = '1';
                  document.getElementById('cameraStatusText').textContent = 'Scanning Grid Active';
                  document.getElementById('inspectionStatus').textContent = 'Scanning Grid Active';
                  
                  setTimeout(() => {
                      // Step 3: Show part simulation
                      document.getElementById('partSimulation').style.opacity = '1';
                      document.getElementById('cameraStatusText').textContent = 'Part Detected';
                      document.getElementById('inspectionStatus').textContent = 'Part Detected';
                      
                      setTimeout(() => {
                          // Step 4: Start scanning line
                          const scanningLine = document.getElementById('scanningLine');
                          scanningLine.style.opacity = '1';
                          scanningLine.style.transform = 'translateY(0px)';
                          document.getElementById('cameraStatusText').textContent = 'Scanning...';
                          document.getElementById('inspectionStatus').textContent = 'Scanning...';
                          
                          // Animate scanning line
                          let scanPosition = 0;
                          const scanInterval = setInterval(() => {
                              scanPosition += 2;
                              scanningLine.style.transform = `translateY(${scanPosition}px)`;
                              
                              if (scanPosition >= 400) {
                                  clearInterval(scanInterval);
                                  completeInspection();
                              }
                          }, 50);
                      }, 1000);
                  }, 1000);
              }, 1000);
          }

          function completeInspection() {
              if (!isInspecting) return;
              
              inspectionStats.partsInspected++;
              
              // Simulate defect detection (20% chance of defect)
              const hasDefect = Math.random() < 0.2;
              
              if (hasDefect) {
                  inspectionStats.defectsFound++;
                  const defectType = getRandomDefectType();
                  showDefectDetection(defectType);
                  addDetectionLog(defectType);
              } else {
                  showPassInspection();
              }
              
              inspectionStats.passRate = Math.round(((inspectionStats.partsInspected - inspectionStats.defectsFound) / inspectionStats.partsInspected) * 100);
              updateInspectionStats();
              
              // Reset camera view for next inspection
              setTimeout(() => {
                  resetCameraView();
                  
                  // Continue cycle after delay
                  if (isInspecting) {
                      setTimeout(() => {
                          startInspectionSequence();
                      }, 2000);
                  }
              }, 3000);
          }

          function resetCameraView() {
              // Reset all visual elements
              document.getElementById('scanningGrid').style.opacity = '0';
              document.getElementById('partSimulation').style.opacity = '0';
              document.getElementById('scanningLine').style.opacity = '0';
              document.getElementById('scanningLine').style.transform = 'translateY(0px)';
              document.getElementById('cameraStatusText').textContent = 'Camera Ready';
              document.getElementById('inspectionStatus').textContent = 'Ready for next inspection';
              clearAllInspectionOverlays();
          }

          function clearAllInspectionOverlays() {
              document.getElementById('inspectionOverlay').innerHTML = '';
          }
          
          function getRandomDefectType() {
              const defects = ['Short Fill', 'Sliver Streak', 'Flow Mark', 'Flash'];
              return defects[Math.floor(Math.random() * defects.length)];
          }
          
          function showDefectDetection(defectType) {
              const overlay = document.getElementById('inspectionOverlay');
              
              // Clear previous overlays
              overlay.innerHTML = '';
              
              // Add defect-specific visual effects
              switch (defectType) {
                  case 'Short Fill':
                      overlay.innerHTML = `
                          <div class="absolute inset-0 border-4 border-red-500 rounded-lg animate-pulse" style="margin: 20px;"></div>
                          <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-red-600 text-white px-4 py-2 rounded-lg font-semibold">
                              ‚ùå SHORT FILL DETECTED
                          </div>
                      `;
                      break;
                  case 'Sliver Streak':
                      overlay.innerHTML = `
                          <div class="absolute top-1/3 left-1/3 w-1/3 h-1/3 border-4 border-red-500 rounded-full animate-pulse"></div>
                          <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-red-600 text-white px-4 py-2 rounded-lg font-semibold">
                              ‚ùå SLIVER STREAK DETECTED
                          </div>
                      `;
                      break;
                  case 'Flow Mark':
                      overlay.innerHTML = `
                          <div class="absolute top-1/3 left-1/4 w-1/2 h-1 border-2 border-red-500 rounded-full"></div>
                          <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-red-600 text-white px-4 py-2 rounded-lg font-semibold">
                              ‚ùå FLOW MARK DETECTED
                          </div>
                      `;
                      break;
                  case 'Flash':
                      overlay.innerHTML = `
                          <div class="absolute top-1/2 left-1/2 text-red-500 text-4xl animate-bounce">‚Üí</div>
                          <div class="absolute top-1/4 left-1/4 w-1/2 h-1/2 bg-red-500 bg-opacity-30"></div>
                          <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-red-600 text-white px-4 py-2 rounded-lg font-semibold">
                              ‚ùå FLASH DETECTED
                          </div>
                      `;
                      break;
              }
              
              // Clear overlay after 2 seconds
              setTimeout(() => {
                  overlay.innerHTML = '';
              }, 2000);
          }
          
          function showPassInspection() {
              const overlay = document.getElementById('inspectionOverlay');
              overlay.innerHTML = `
                  <div class="absolute inset-0 border-4 border-green-500 rounded-lg animate-pulse" style="margin: 20px;"></div>
                  <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-green-600 text-white px-4 py-2 rounded-lg font-semibold">
                      ‚úÖ PASS
                  </div>
              `;
              
              setTimeout(() => {
                  overlay.innerHTML = '';
              }, 1500);
          }
          
          function addDetectionLog(defectType) {
              const log = document.getElementById('detectionLog');
              const timestamp = new Date().toLocaleTimeString();
              const logEntry = document.createElement('p');
              logEntry.className = 'text-red-400';
              logEntry.textContent = `${timestamp} - ${defectType} detected`;
              
              log.insertBefore(logEntry, log.firstChild);
              
              // Keep only last 5 entries
              if (log.children.length > 5) {
                  log.removeChild(log.lastChild);
              }
          }
          
                     function updateInspectionStats() {
               document.getElementById('partsInspected').textContent = inspectionStats.partsInspected;
               document.getElementById('defectsFound').textContent = inspectionStats.defectsFound;
               document.getElementById('passRate').textContent = inspectionStats.passRate + '%';
           }
           
           // Report Mode Variables
           const childParts = [
               'Bracket',
               'Condenser',
               'Duct Sub assy air',
               'Holder Filter',
               'BRACKET',
               'Cover',
               'Lever',
               'Cover',
               'Pipe'
           ];
           
                       function showReportMode() {
                document.body.innerHTML = `
                    <div class="min-h-screen bg-gray-900 text-white">
                        <!-- Header -->
                        <div class="bg-gray-800 p-4 border-b border-gray-700">
                            <div class="flex justify-between items-center">
                                <h1 class="text-2xl font-bold">Report Generation</h1>
                                <button onclick="showDashboard()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">
                                    ‚Üê Back to Dashboard
                                </button>
                            </div>
                        </div>
                        
                        <!-- Main Content -->
                        <div class="p-8">
                            <div class="max-w-6xl mx-auto">
                                <!-- Simple Report Generation -->
                                <div class="bg-gray-800 rounded-lg p-6 mb-8">
                                    <h2 class="text-xl font-semibold mb-6">Generate Dummy Reports</h2>
                                    <p class="text-gray-400 mb-6">Click the button below to generate dummy quality inspection reports instantly.</p>
                                    
                                    <!-- Simple Generate Report Button -->
                                    <div class="text-center">
                                        <button onclick="generateSimpleDummyReport()" class="bg-green-600 hover:bg-green-700 text-white px-12 py-4 rounded-lg font-semibold text-lg transition-colors shadow-lg">
                                            üìä Generate Dummy Report
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Report Results -->
                                <div id="reportResults" class="bg-gray-800 rounded-lg p-6">
                                    <h2 class="text-xl font-semibold mb-6">Inspection Report</h2>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-sm">
                                            <thead>
                                                <tr class="bg-gray-700">
                                                    <th class="px-4 py-3 text-left">Date Time</th>
                                                    <th class="px-4 py-3 text-left">Child Part Name</th>
                                                    <th class="px-4 py-3 text-left">Status</th>
                                                    <th class="px-4 py-3 text-left">Description</th>
                                                </tr>
                                            </thead>
                                                                                         <tbody id="reportTableBody">
                                                 <tr>
                                                     <td colspan="4" class="px-4 py-8 text-center text-gray-400">
                                                         Select parameters and click "Generate Report" to view data
                                                     </td>
                                                 </tr>
                                             </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                                 // Don't load data by default - wait for user to generate report
                 // loadDummyReportData();
            }
           
                       function loadDummyReportData() {
                const dummyData = [
                    {
                        dateTime: '2024-01-15 08:30:15',
                        childPartName: 'Bracket',
                        status: 'OK',
                        description: 'PASS'
                    },
                    {
                        dateTime: '2024-01-15 09:15:22',
                        childPartName: 'Condenser',
                        status: 'NOT OK',
                        description: 'Short Fill FAIL'
                    },
                    {
                        dateTime: '2024-01-15 10:05:33',
                        childPartName: 'Duct Sub assy air',
                        status: 'OK',
                        description: 'PASS'
                    },
                    {
                        dateTime: '2024-01-15 11:20:45',
                        childPartName: 'Holder Filter',
                        status: 'NOT OK',
                        description: 'Sliver Streak FAIL'
                    },
                    {
                        dateTime: '2024-01-15 12:45:18',
                        childPartName: 'BRACKET',
                        status: 'OK',
                        description: 'PASS'
                    },
                    {
                        dateTime: '2024-01-15 13:30:27',
                        childPartName: 'Cover',
                        status: 'NOT OK',
                        description: 'Flow Mark FAIL'
                    },
                    {
                        dateTime: '2024-01-15 14:15:39',
                        childPartName: 'Lever',
                        status: 'OK',
                        description: 'PASS'
                    },
                    {
                        dateTime: '2024-01-15 15:00:52',
                        childPartName: 'Pipe',
                        status: 'NOT OK',
                        description: 'Flash FAIL'
                    },
                    {
                        dateTime: '2024-01-15 16:25:14',
                        childPartName: 'Bracket',
                        status: 'OK',
                        description: 'PASS'
                    },
                    {
                        dateTime: '2024-01-15 17:10:28',
                        childPartName: 'Condenser',
                        status: 'OK',
                        description: 'PASS'
                    }
                ];
                
                displayReport(dummyData);
            }
            
            function generateReport() {
                const childPart = document.getElementById('childPartSelect').value;
                const fromDate = document.getElementById('fromDate').value;
                const toDate = document.getElementById('toDate').value;
                const shift = document.getElementById('shiftSelect').value;
                
                if (!childPart || !fromDate || !toDate || !shift) {
                    alert('Please fill in all fields before generating report.');
                    return;
                }
                
                // Generate comprehensive report data for the selected child part
                const reportData = generateComprehensiveData(childPart, fromDate, toDate, shift);
                
                // Display the comprehensive report
                displayComprehensiveReport(reportData, childPart, fromDate, toDate, shift);
                
                // Show success message
                alert(`Comprehensive report generated for ${childPart} from ${fromDate} to ${toDate} (Shift ${shift})`);
            }
           
           function generateSampleReportData(childPart, fromDate, toDate, shift) {
               const data = [];
               const startDate = new Date(fromDate);
               const endDate = new Date(toDate);
               
               // Generate sample data for each day in the range
               for (let date = new Date(startDate); date <= endDate; date.setDate(date.getDate() + 1)) {
                   const dayData = [];
                   
                   // Generate 8-12 entries per day (typical shift)
                   const numEntries = Math.floor(Math.random() * 5) + 8;
                   
                   for (let i = 0; i < numEntries; i++) {
                       const hour = Math.floor(Math.random() * 8) + 8; // 8 AM to 4 PM
                       const minute = Math.floor(Math.random() * 60);
                       const timestamp = new Date(date);
                       timestamp.setHours(hour, minute, 0, 0);
                       
                       // 80% pass rate
                       const isPass = Math.random() < 0.8;
                       const status = isPass ? 'OK' : 'NOT OK';
                       
                       let description = '';
                       if (!isPass) {
                           const defects = ['Short Fill', 'Sliver Streak', 'Flow Mark', 'Flash'];
                           const defect = defects[Math.floor(Math.random() * defects.length)];
                           description = `${defect} FAIL`;
                       } else {
                           description = 'PASS';
                       }
                       
                       dayData.push({
                           dateTime: timestamp.toLocaleString(),
                           childPartName: childPart,
                           status: status,
                           description: description
                       });
                   }
                   
                   data.push(...dayData);
               }
               
               return data;
           }
           
           function displayReport(data) {
               const tableBody = document.getElementById('reportTableBody');
               const reportResults = document.getElementById('reportResults');
               
               // Clear previous data
               tableBody.innerHTML = '';
               
               // Add report data
               data.forEach(row => {
                   const tr = document.createElement('tr');
                   tr.className = 'border-b border-gray-700 hover:bg-gray-700';
                   
                   const statusClass = row.status === 'OK' ? 'text-green-400' : 'text-red-400';
                   
                   tr.innerHTML = `
                       <td class="px-4 py-3">${row.dateTime}</td>
                       <td class="px-4 py-3">${row.childPartName}</td>
                       <td class="px-4 py-3 ${statusClass} font-semibold">${row.status}</td>
                       <td class="px-4 py-3">${row.description}</td>
                   `;
                   
                   tableBody.appendChild(tr);
               });
               
               // Show the report
               reportResults.classList.remove('hidden');
               
               // Scroll to report
               reportResults.scrollIntoView({ behavior: 'smooth' });
           }

           // Enhanced dummy report generation with comprehensive data
           function generateComprehensiveDummyReport() {
               const childPart = document.getElementById('childPartSelect').value || 'Bracket';
               const fromDate = document.getElementById('fromDate').value || '2024-01-01';
               const toDate = document.getElementById('toDate').value || '2024-01-31';
               const shift = document.getElementById('shiftSelect').value || 'A';
               
               // Generate comprehensive dummy data
               const comprehensiveData = generateComprehensiveData(childPart, fromDate, toDate, shift);
               
               // Display the comprehensive report
               displayComprehensiveReport(comprehensiveData, childPart, fromDate, toDate, shift);
           }
           
           function generateComprehensiveData(childPart, fromDate, toDate, shift) {
               const data = [];
               const startDate = new Date(fromDate);
               const endDate = new Date(toDate);
               const shiftHours = {
                   'A': { start: 6, end: 14 },   // 6 AM to 2 PM
                   'B': { start: 14, end: 22 },  // 2 PM to 10 PM
                   'C': { start: 22, end: 6 }    // 10 PM to 6 AM
               };
               
               const currentShift = shiftHours[shift];
               
               // Generate data for each day in the range
               for (let date = new Date(startDate); date <= endDate; date.setDate(date.getDate() + 1)) {
                   // Skip weekends if needed (optional)
                   const dayOfWeek = date.getDay();
                   if (dayOfWeek === 0 || dayOfWeek === 6) continue; // Skip Sunday and Saturday
                   
                   const dayData = [];
                   
                   // Generate 10-15 entries per day (typical shift)
                   const numEntries = Math.floor(Math.random() * 6) + 10;
                   
                   for (let i = 0; i < numEntries; i++) {
                       const hour = Math.floor(Math.random() * (currentShift.end - currentShift.start)) + currentShift.start;
                       const minute = Math.floor(Math.random() * 60);
                       const second = Math.floor(Math.random() * 60);
                       
                       const timestamp = new Date(date);
                       timestamp.setHours(hour, minute, second, 0);
                       
                       // 85% pass rate for better quality control
                       const isPass = Math.random() < 0.85;
                       const status = isPass ? 'OK' : 'NOT OK';
                       
                       let description = '';
                       let defectDetails = '';
                       
                       if (!isPass) {
                           const defects = [
                               { name: 'Short Fill', severity: 'High', location: 'Top Section' },
                               { name: 'Sliver Streak', severity: 'Medium', location: 'Surface Area' },
                               { name: 'Flow Mark', severity: 'Low', location: 'Side Wall' },
                               { name: 'Flash', severity: 'High', location: 'Edge' },
                               { name: 'Sink Mark', severity: 'Medium', location: 'Center' },
                               { name: 'Warpage', severity: 'High', location: 'Base' }
                           ];
                           const defect = defects[Math.floor(Math.random() * defects.length)];
                           description = `${defect.name} FAIL`;
                           defectDetails = `${defect.severity} severity at ${defect.location}`;
                       } else {
                           description = 'PASS';
                           defectDetails = 'No defects detected';
                       }
                       
                       // Add batch information
                       const batchNumber = `B${Math.floor(Math.random() * 1000) + 1000}`;
                       const operatorId = `OP${Math.floor(Math.random() * 50) + 1}`;
                       
                       dayData.push({
                           dateTime: timestamp.toLocaleString('en-US', {
                               year: 'numeric',
                               month: '2-digit',
                               day: '2-digit',
                               hour: '2-digit',
                               minute: '2-digit',
                               second: '2-digit'
                           }),
                           childPartName: childPart,
                           status: status,
                           description: description,
                           defectDetails: defectDetails,
                           batchNumber: batchNumber,
                           operatorId: operatorId,
                           shift: shift,
                           inspectionTime: Math.floor(Math.random() * 30) + 15 + ' seconds'
                       });
                   }
                   
                   // Sort by time
                   dayData.sort((a, b) => new Date(a.dateTime) - new Date(b.dateTime));
                   data.push(...dayData);
               }
               
               return data;
           }
           
           function displayComprehensiveReport(data, childPart, fromDate, toDate, shift) {
               const reportResults = document.getElementById('reportResults');
               
               // Calculate statistics
               const totalInspections = data.length;
               const passedInspections = data.filter(item => item.status === 'OK').length;
               const failedInspections = totalInspections - passedInspections;
               const passRate = totalInspections > 0 ? ((passedInspections / totalInspections) * 100).toFixed(2) : 0;
               
               // Group defects by type
               const defectTypes = {};
               data.forEach(item => {
                   if (item.status === 'NOT OK') {
                       const defectName = item.description.replace(' FAIL', '');
                       defectTypes[defectName] = (defectTypes[defectName] || 0) + 1;
                   }
               });
               
               // Create comprehensive report HTML
               reportResults.innerHTML = `
                   <div class="space-y-6">
                       <!-- Report Header -->
                       <div class="bg-gray-700 rounded-lg p-6">
                           <h2 class="text-2xl font-bold mb-4">Quality Inspection Report</h2>
                           <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">
                               <div>
                                   <span class="text-gray-400">Child Part:</span>
                                   <div class="font-semibold">${childPart}</div>
                               </div>
                               <div>
                                   <span class="text-gray-400">Date Range:</span>
                                   <div class="font-semibold">${fromDate} to ${toDate}</div>
                               </div>
                               <div>
                                   <span class="text-gray-400">Shift:</span>
                                   <div class="font-semibold">Shift ${shift}</div>
                               </div>
                               <div>
                                   <span class="text-gray-400">Generated:</span>
                                   <div class="font-semibold">${new Date().toLocaleString()}</div>
                               </div>
                           </div>
                       </div>
                       
                       <!-- Summary Statistics -->
                       <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                           <div class="bg-gray-700 rounded-lg p-4 text-center">
                               <div class="text-2xl font-bold text-blue-400">${totalInspections}</div>
                               <div class="text-sm text-gray-400">Total Inspections</div>
                           </div>
                           <div class="bg-gray-700 rounded-lg p-4 text-center">
                               <div class="text-2xl font-bold text-green-400">${passedInspections}</div>
                               <div class="text-sm text-gray-400">Passed</div>
                           </div>
                           <div class="bg-gray-700 rounded-lg p-4 text-center">
                               <div class="text-2xl font-bold text-red-400">${failedInspections}</div>
                               <div class="text-sm text-gray-400">Failed</div>
                           </div>
                           <div class="bg-gray-700 rounded-lg p-4 text-center">
                               <div class="text-2xl font-bold text-yellow-400">${passRate}%</div>
                               <div class="text-sm text-gray-400">Pass Rate</div>
                           </div>
                       </div>
                       
                       <!-- Defect Analysis -->
                       <div class="bg-gray-700 rounded-lg p-6">
                           <h3 class="text-xl font-semibold mb-4">Defect Analysis</h3>
                           <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                               ${Object.entries(defectTypes).map(([defect, count]) => `
                                   <div class="bg-gray-600 rounded-lg p-3">
                                       <div class="flex justify-between items-center">
                                           <span class="font-medium">${defect}</span>
                                           <span class="text-red-400 font-bold">${count}</span>
                                       </div>
                                       <div class="w-full bg-gray-500 rounded-full h-2 mt-2">
                                           <div class="bg-red-500 h-2 rounded-full" style="width: ${(count / failedInspections * 100)}%"></div>
                                       </div>
                                   </div>
                               `).join('')}
                           </div>
                       </div>
                       
                       <!-- Detailed Report Table -->
                       <div class="bg-gray-700 rounded-lg p-6">
                           <h3 class="text-xl font-semibold mb-4">Detailed Inspection Log</h3>
                           <div class="overflow-x-auto">
                               <table class="w-full text-sm">
                                   <thead>
                                       <tr class="bg-gray-600">
                                           <th class="px-4 py-3 text-left">Date Time</th>
                                           <th class="px-4 py-3 text-left">Child Part</th>
                                           <th class="px-4 py-3 text-left">Status</th>
                                           <th class="px-4 py-3 text-left">Description</th>
                                           <th class="px-4 py-3 text-left">Batch</th>
                                           <th class="px-4 py-3 text-left">Operator</th>
                                           <th class="px-4 py-3 text-left">Time</th>
                                       </tr>
                                   </thead>
                                   <tbody>
                                       ${data.map(row => {
                                           const statusClass = row.status === 'OK' ? 'text-green-400' : 'text-red-400';
                                           return `
                                               <tr class="border-b border-gray-600 hover:bg-gray-600">
                                                   <td class="px-4 py-3">${row.dateTime}</td>
                                                   <td class="px-4 py-3">${row.childPartName}</td>
                                                   <td class="px-4 py-3 ${statusClass} font-semibold">${row.status}</td>
                                                   <td class="px-4 py-3">${row.description}</td>
                                                   <td class="px-4 py-3 text-blue-400">${row.batchNumber}</td>
                                                   <td class="px-4 py-3 text-yellow-400">${row.operatorId}</td>
                                                   <td class="px-4 py-3 text-gray-300">${row.inspectionTime}</td>
                                               </tr>
                                           `;
                                       }).join('')}
                                   </tbody>
                               </table>
                           </div>
                       </div>
                       
                       <!-- Export Options -->
                       <div class="bg-gray-700 rounded-lg p-6">
                           <h3 class="text-xl font-semibold mb-4">Export Options</h3>
                           <div class="flex space-x-4">
                               <button onclick="exportToCSV()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors">
                                   üìä Export to CSV
                               </button>
                               <button onclick="exportToPDF()" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors">
                                   üìÑ Export to PDF
                               </button>
                               <button onclick="printReport()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors">
                                   üñ®Ô∏è Print Report
                               </button>
                           </div>
                       </div>
                   </div>
               `;
               
               // Show the report
               reportResults.classList.remove('hidden');
               
               // Scroll to report
               reportResults.scrollIntoView({ behavior: 'smooth' });
           }
           
           // Export functions
           function exportToCSV() {
               alert('CSV export functionality would be implemented here');
           }
           
           function exportToPDF() {
               alert('PDF export functionality would be implemented here');
           }
           
           function printReport() {
               window.print();
           }
           
                       // Simple dummy report generation - no date controls needed
            function generateSimpleDummyReport() {
                // Generate random data for the last 30 days
                const endDate = new Date();
                const startDate = new Date();
                startDate.setDate(endDate.getDate() - 30);
                
                // Random child part
                const randomPart = childParts[Math.floor(Math.random() * childParts.length)];
                const randomShift = ['A', 'B', 'C'][Math.floor(Math.random() * 3)];
                
                // Generate comprehensive dummy data
                const comprehensiveData = generateComprehensiveData(randomPart, startDate.toISOString().split('T')[0], endDate.toISOString().split('T')[0], randomShift);
                
                // Display the comprehensive report
                displayComprehensiveReport(comprehensiveData, randomPart, startDate.toISOString().split('T')[0], endDate.toISOString().split('T')[0], randomShift);
                
                // Show success message
                alert(`‚úÖ Dummy report generated for ${randomPart} (Shift ${randomShift})`);
            }
     </script>
</body>
</html>
